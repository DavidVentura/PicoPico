pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
function _init()
 balls={}
 ball_count=1
 make_player()
 score=0
 high_score=0
 game_start=true
 game_over=false
 ball_made=false
end

function _update()
 update_player()
 
 foreach(balls,update_ball)
 if count(balls) == 0
  and not game_start then
  game_over = true
 end
 if not ball_made and score % 10 == 5 
   and count(balls) < 3 then
  make_ball(flr(rnd(5))-2, 2)
  ball_made = true
 end
 if score%10 == 6 then
  ball_made = false
 end
 if game_start and btn(❎) then
  make_ball(2,2)
  game_start = false
 end
 if game_over and btn(❎) then
  make_ball(2,2)
  game_over = false
  score = 0
 end
 make_ball(flr(rnd(5))-2, 2)
 make_ball(flr(rnd(5))-2, 2)
 make_ball(flr(rnd(5))-2, 2)
 make_ball(flr(rnd(5))-2, 2)
end

function _draw()
 cls()
 draw_player()
 foreach(balls,draw_ball)
 draw_score()
 if game_start then
  main_menu()
 end
 if game_over then
  game_over_splash()
 end
end
-->8
function make_player()
 player={}
 player.y1=10
 player.y2=96
 player.x1=10
 player.x2=118
end

function update_player()
 dy = 5
 if btn(2) then
  if player.y1 > 10 then
   player.y1-=dy
   player.y2+=dy
  end
 elseif btn(3) then
  if player.y1 < 95 then
   player.y1+=dy
   player.y2-=dy
  end
 end
end

function draw_player()
 --draw first paddle
 spr(1, player.x1-8,player.y1)
 spr(2,player.x1-8,player.y1+8)
 spr(2,player.x1-8,player.y1+16)
 spr(3,player.x1-8,player.y1+24)
 
 --draw second paddle
 spr(4, player.x2,player.y2)
 spr(5,player.x2,player.y2+8)
 spr(5,player.x2,player.y2+16)
 spr(6,player.x2,player.y2+24)
end
-->8
function make_ball(dx,dy)
 ball_count+=1
 local ball={}
 ball.x=64
 ball.y=64
 ball.dx=dx
 ball.dy=dy
 ball.spr=9
 add(balls,ball)
 printh(#balls)
end

function update_ball(ball)
 ball.x+=ball.dx
 ball.y+=ball.dy
 if ball.spr != 8 and player.x1-3 <= flr(ball.x) and flr(ball.x) <= player.x1 then
  collide_ball_left(ball)
 end
 
 if ball.spr != 7 and player.x2 <= flr(ball.x) and flr(ball.x) <= player.x2+3 then
  collide_ball_right(ball)
 end
 
 if ball.y >= 121 then
  ball.dy = -1
 end
 if ball.y <= 10 then
  ball.dy = 1
 end
 
 if ball.dx == 0 then
  ball.dx = 2
 end
 
 if ball.x < 0 then
  del(balls, ball)
  if count(balls) > 0 then
   if score < 10 then
    score = flr(score / 2)
   elseif score >= 10 then
    score -= 5
   end
  end
 end
 
 if ball.x > 128 then
  del(balls, ball)
  if count(balls) > 0 then
   if score < 10 then
    score = flr(score / 2)
   elseif score >= 10 then
    score -= 5
   end
  end
 end
end


function collide_ball_left(ball) 
 if ball.y > player.y1
  and ball.y < player.y1+32 then
   ball.dx = -(ball.dx)
   if (ball.dy > 0) then
    ball.dy+=1
    if ball.dy == 0 then
     ball.dy = 1
    end
   elseif ball.dy <=0 then
    ball.dy-=1
    if ball.dy == 0 then
     ball.dy = -1
    end
   end
   ball.spr = 8
   score+=1
 end
end

function collide_ball_right(ball)
 if ball.y > player.y2
  and ball.y < player.y2+32 then
   ball.dx = -(ball.dx)
   if (ball.dy > 0) then
    ball.dy+=1
   elseif ball.dy <=0 then
    ball.dy-=1
   end
   ball.spr = 7
   score+=1
 end 
end

function draw_ball(ball)
 spr(ball.spr,ball.x,ball.y)
end
-->8
function main_menu()
 print("tennis for one!", 28, 56, 7)
 print("press ❎ to start!", 34, 64, 7) 
 print("by: alex may", 0, 120, 5)
 print("v1.1", 110,120,7)
end

function game_over_splash()
 print("game over!", 28, 56,7)
 print("score: ", 28, 64,7)
 print(score, 52, 64,7)
 print("press ❎ to play again!", 28, 72,7)

end

function draw_score()
 print("score: ", 0, 0,7)
 print(score, 32, 0,7)
end
__gfx__
00000000000000060000006c0000006c600000008600000086000000060000000600000006000000000000000000000000000000000000000000000000000000
000000000000006c0000006c0000006c860000008600000086000000686000006c60000060600000000000000000000000000000000000000000000000000000
007007000000006c0000006c0000006c860000008600000086000000060000000600000006000000000000000000000000000000000000000000000000000000
000770000000006c0000006c0000006c860000008600000086000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000006c0000006c0000006c860000008600000086000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000006c0000006c0000006c860000008600000086000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000006c0000006c0000006c860000008600000086000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000006c0000006c00000006860000008600000060000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
07700770077077707770000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70007000707070707000070000000000707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77707000707077007700000000000000707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707000707070707000070000000000707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77000770770070707770000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000007770777077007700777007700000777007707770000007707700777007000000000000000000000000000000000000000000
00000000000000000000000000000700700070707070070070000000700070707070000070707070700007000000000000000000000000000000000000000000
00000000000000000000000000000700770070707070070077700000770070707700000070707070770007000000000000000000000000000000000000000000
00000000000000000000000000000700700070707070070000700000700070707070000070707070700000000000000000000000000000000000000000000000
00000000000000000000000000000700777070707070777077000000700077007070000077007070777007000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000007770777077700770077000000777770000007770077000000770777077707770777007000000000000000000000000
00000000000000000000000000000000007070707070007000700000007707077000000700707000007000070070707070070007000000000000000000000000
00000000000000000000000000000000007770770077007770777000007770777000000700707000007770070077707700070007000000000000000000000000
00000000000000000000000000000000007000707070000070007000007707077000000700707000000070070070707070070000000000000000000000000000
00000000000000000000000000000000007000707077707700770000000777770000000700770000007700070070707070070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
55505050000000005550500055505050000055505550505000000000000000000000000000000000000000000000000000000000000000707077008600770000
50505050050000005050500050005050000055505050505000000000000000000000000000000000000000000000000000000000000000707007008600070000
55005550000000005550500055000500000050505550555000000000000000000000000000000000000000000000000000000000000000707007008600070000
50500050050000005050500050005050000050505050005000000000000000000000000000000000000000000000000000000000000000777007008600070000
55505550000000005050555055505050000050505050555000000000000000000000000000000000000000000000000000000000000000070077708700777000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000
